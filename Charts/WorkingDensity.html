
    <!DOCTYPE html>
    <html>
      <head>
        <meta charset="UTF-8"/>
        <title>Kepler.gl embedded map</title>
      
        <!--Uber Font-->
        <link rel="stylesheet" href="https://d1a3f4spazzrp4.cloudfront.net/kepler.gl/uber-fonts/4.0.0/superfine.css">
      
        <!--MapBox css-->
        <link href="https://api.tiles.mapbox.com/mapbox-gl-js/v0.42.0/mapbox-gl.css" rel="stylesheet">
      
        <!-- Load React/Redux -->
        <script src="https://unpkg.com/react@16.8.4/umd/react.production.min.js" crossorigin></script>
        <script src="https://unpkg.com/react-dom@16.8.4/umd/react-dom.production.min.js" crossorigin></script>
        <script src="https://unpkg.com/redux@3.7.2/dist/redux.js" crossorigin></script>
        <script src="https://unpkg.com/react-redux@5.1.1/dist/react-redux.min.js" crossorigin></script>
        <script src="https://unpkg.com/styled-components@4.1.3/dist/styled-components.min.js" crossorigin></script>
        <script src="https://unpkg.com/react-virtualized@9.21.0/dist/umd/react-virtualized.js" crossorigin></script>
        
        <!-- Load Kepler.gl -->
        <script src="https://unpkg.com/kepler.gl@1.0.0-2/umd/keplergl.min.js" crossorigin></script>
      
        <style type="text/css">
          body {margin: 0; padding: 0; overflow: hidden;}
        </style>
      
        <!--MapBox token-->
        <script>
          /**
           * Provide your MapBox Token
           **/
          const MAPBOX_TOKEN = 'pk.eyJ1IjoidWJlcmRhdGEiLCJhIjoiY2pza3FoNjQzMGl5ODQ5b2F4eWpuYzF0dyJ9.mEHQ58UbqAL9baBRxdxjcQ';
          const WARNING_MESSAGE = 'Please Provide a Mapbox Token in order to use Kepler.gl. Edit this file and fill out MAPBOX_TOKEN with your access key';
        </script>
      </head>
      <body>
        <!-- We will put our React component inside this div. -->
        <div id="app">
          <!-- Kepler.gl map will be placed here-->
        </div>
      
        <!-- Load our React component. -->
        <script>
          /* Validate Mapbox Token */
          if ((MAPBOX_TOKEN || '') === '' || MAPBOX_TOKEN === 'PROVIDE_MAPBOX_TOKEN') {
            alert(WARNING_MESSAGE);
          }
      
          /** STORE **/
          const reducers = (function createReducers(redux, keplerGl) {
            return redux.combineReducers({
              // mount keplerGl reducer
              keplerGl: keplerGl.keplerGlReducer
            });
          }(Redux, KeplerGl));
      
          const middleWares = (function createMiddlewares(keplerGl) {
            return keplerGl.enhanceReduxMiddleware([
              // Add other middlewares here
            ]);
          }(KeplerGl));
      
          const enhancers = (function craeteEnhancers(redux, middles) {
            return redux.applyMiddleware(...middles);
          }(Redux, middleWares));
      
          const store = (function createStore(redux, enhancers) {
            const initialState = {};
      
            return redux.createStore(
              reducers,
              initialState,
              redux.compose(enhancers)
            );
          }(Redux, enhancers));
          /** END STORE **/
          
          /** COMPONENTS **/
          const KeplerElement = (function (react, reactVirtualized, keplerGl, mapboxToken) {
            return function() {
              return react.createElement(
                'div',
                {style: {position: 'absolute', left: 0, width: '100vw', height: '100vh'}},
                React.createElement(reactVirtualized.AutoSizer, null, function (props) {
                  return React.createElement(keplerGl.KeplerGl, {
                    mapboxApiAccessToken: mapboxToken,
                    id: "map",
                    width: props.width,
                    height: props.height
                  });
                })
              )
            }
          }(React, ReactVirtualized, KeplerGl, MAPBOX_TOKEN));
      
          const app = (function createReactReduxProvider(react, reactRedux, KeplerElement) {
            return react.createElement(
              reactRedux.Provider,
              {store},
              react.createElement(KeplerElement, null)
            )
          }(React, ReactRedux, KeplerElement));
          /** END COMPONENTS **/
      
          /** Render **/
          (function render(react, reactDOM, app) {
            reactDOM.render(app, document.getElementById('app'));
          }(React, ReactDOM, app));
        </script>
        <!-- The next script will show how to interact directly with Kepler map store -->
        <script>
          /**
           * Customize map.
           * In the following section you can use the store object to dispatch Kepler.gl actions
           * to add new data and customize behavior
           */
          (function customize(keplerGl, store) {
            const datasets = [{"version":"v1","data":{"id":"4xsr4t2yf","label":"chengdusensity.csv","color":[143,47,191],"allData":[["{\"type\":\"Feature\",\"properties\":{\"name\":\"ۯ��\",\"id\":\"510124\"},\"geometry\":{\"type\":\"MultiPolygon\",\"coordinates\":[[[[103.787100859375,30.9512038398437],[103.832135039063,30.9380739570313],[103.852906523438,30.9411428046876],[103.897345,30.9338430000001],[103.897345,30.923843],[103.907345,30.923843],[103.917345,30.923843],[103.921429472656,30.9179274726563],[103.948099394531,30.8995143867188],[103.939791289063,30.8624489570313],[103.977706328125,30.8330617500001],[104.019056425781,30.8175905585938],[104.033260527344,30.7597585273437],[104.037345,30.753843],[104.0341809375,30.73212425],[104.000716582031,30.7653542304688],[103.994801054688,30.7363869453125],[103.959888945313,30.7312990546876],[103.957345,30.723843],[103.947345,30.723843],[103.94099734375,30.7317702460938],[103.895206328125,30.7510646796876],[103.86705203125,30.747563703125],[103.801607695313,30.7860329414063],[103.782899199219,30.8093971992188],[103.761790800781,30.8182888007813],[103.752899199219,30.8293971992187],[103.721790800781,30.8482888007813],[103.717345,30.8638430000001],[103.753616972656,30.8881667304688],[103.751160917969,30.8991213203126],[103.763260527344,30.9279274726563],[103.771429472656,30.9597585273438],[103.777345,30.963843],[103.787100859375,30.9512038398437]]]]}}","Pidu District",7.71,7.2],["{\"type\":\"Feature\",\"properties\":{\"name\":\"˫����\",\"id\":\"510122\"},\"geometry\":{\"type\":\"MultiPolygon\",\"coordinates\":[[[[103.917345,30.6738430000001],[103.917345,30.663843],[103.927345,30.663843],[103.947345,30.663843],[103.951158476563,30.6376564765625],[103.963912382813,30.5988747382813],[103.960787382813,30.5888430000001],[103.965091582031,30.5750270820313],[104.002345,30.5866310859375],[104.036160917969,30.5760964179688],[104.027672148438,30.548843],[104.073079863281,30.5333693671875],[104.077345,30.573843],[104.103260527344,30.5697585273438],[104.111998320313,30.55710471875],[104.131929960938,30.5700856757812],[104.157345,30.563843],[104.160704375,30.547202375],[104.180657988281,30.5371071601562],[104.207398710938,30.4838747382813],[104.247345,30.463843],[104.2682825,30.458012921875],[104.248631621094,30.4325563789063],[104.23170046875,30.41948753125],[104.218631621094,30.3875563789063],[104.20170046875,30.3594875312501],[104.187345,30.3238430000001],[104.182154570313,30.3190334296876],[104.158365507813,30.2821950507813],[104.133433867188,30.2293654609376],[104.042503691406,30.269048078125],[104.032345,30.2686452460938],[104.017345,30.2692385078126],[104.002193632813,30.2686379218751],[103.987345,30.273843],[103.971656523438,30.312798078125],[103.943065214844,30.3348635078125],[103.93298953125,30.3594875312501],[103.917345,30.3638430000001],[103.931698027344,30.4038430000001],[103.912034941406,30.4586428046875],[103.912642851563,30.468843],[103.9116809375,30.4849684882813],[103.882064238281,30.4985622382813],[103.871585722656,30.5102883125],[103.831585722656,30.5079030585938],[103.817345,30.523843],[103.810721464844,30.5386305976563],[103.820518828125,30.5700807929688],[103.801158476563,30.5976564765625],[103.797345,30.623843],[103.832081328125,30.6098805976563],[103.869505644531,30.6601930976563],[103.882345,30.6579811835938],[103.897486601563,30.6605886054688],[103.907345,30.6738430000001],[103.917345,30.6738430000001]]]]}}","Shuangliu District",12.9,10.52],["{\"type\":\"Feature\",\"properties\":{\"name\":\"�����\",\"id\":\"510107\"},\"geometry\":{\"type\":\"MultiPolygon\",\"coordinates\":[[[[104.083089628906,30.6088088203125],[104.077345,30.573843],[104.073079863281,30.5333693671875],[104.027672148438,30.548843],[104.036160917969,30.5760964179688],[104.002345,30.5866310859375],[103.965091582031,30.5750270820313],[103.960787382813,30.5888430000001],[103.963912382813,30.5988747382813],[103.951158476563,30.6376564765625],[103.947345,30.663843],[103.991790800781,30.6582888007813],[104.067345,30.653843],[104.07170046875,30.6481984687501],[104.084486113281,30.6383303046875],[104.081605253906,30.618843],[104.083089628906,30.6088088203125]]]]}}","Wuhou District",11.85,10.52],["{\"type\":\"Feature\",\"properties\":{\"name\":\"��ţ��\",\"id\":\"510106\"},\"geometry\":{\"type\":\"MultiPolygon\",\"coordinates\":[[[[104.123385039063,30.7840578437501],[104.121795683594,30.768452375],[104.132806425781,30.7593044257813],[104.137345,30.753843],[104.070081816406,30.7088576484376],[104.083260527344,30.6997585273438],[104.087345,30.6738430000001],[104.061929960938,30.6800856757813],[104.042345,30.6673317695313],[104.023260527344,30.6797585273438],[104.001051054688,30.6880690742188],[104.004320097656,30.7026491523438],[103.976312285156,30.6963698554688],[103.957345,30.723843],[103.959888945313,30.7312990546876],[103.994801054688,30.7363869453125],[104.000716582031,30.7653542304688],[104.0341809375,30.73212425],[104.037345,30.753843],[104.06531375,30.7476174140625],[104.093704863281,30.7505104804688],[104.091685820313,30.7703054023438],[104.065233183594,30.7676076484375],[104.058656035156,30.8083815742188],[104.123385039063,30.7840578437501]]]]}}","Jinniu District",7.63,8.43],["{\"type\":\"Feature\",\"properties\":{\"name\":\"�¶���\",\"id\":\"510114\"},\"geometry\":{\"type\":\"MultiPolygon\",\"coordinates\":[[[[104.177345,30.9038430000001],[104.177345,30.913843],[104.187345,30.913843],[104.187345,30.9038430000001],[104.177345,30.9038430000001]]],[[[103.907345,30.923843],[103.897345,30.923843],[103.897345,30.9338430000001],[103.907345,30.9338430000001],[103.907345,30.923843]]],[[[104.177345,30.9038430000001],[104.161151152344,30.8682765937501],[104.231668730469,30.8582521796876],[104.243519316406,30.838608625],[104.226378203125,30.8253786445312],[104.263949003906,30.7747023750001],[104.260203886719,30.7493556953126],[104.280301542969,30.733843],[104.267345,30.723843],[104.261158476563,30.7200295234375],[104.244737578125,30.6718459296876],[104.233531523438,30.6900295234376],[104.227345,30.693843],[104.219771757813,30.708813703125],[104.190704375,30.717202375],[104.172735625,30.7314748359376],[104.161353789063,30.7259181953125],[104.153985625,30.740483625],[104.140704375,30.747202375],[104.137345,30.753843],[104.132806425781,30.7593044257813],[104.121795683594,30.768452375],[104.123385039063,30.7840578437501],[104.058656035156,30.8083815742188],[104.065233183594,30.7676076484375],[104.091685820313,30.7703054023438],[104.093704863281,30.7505104804688],[104.06531375,30.7476174140625],[104.037345,30.753843],[104.033260527344,30.7597585273437],[104.019056425781,30.8175905585938],[103.977706328125,30.8330617500001],[103.939791289063,30.8624489570313],[103.948099394531,30.8995143867188],[103.921429472656,30.9179274726563],[103.917345,30.923843],[103.95298953125,30.92819846875],[104.043829375,30.9643068671875],[104.079295683594,30.9183596015626],[104.147345,30.913843],[104.163326445313,30.9217873359376],[104.170704375,30.907202375],[104.177345,30.9038430000001]]]]}}","XinDu District",7.5,6.22],["{\"type\":\"Feature\",\"properties\":{\"name\":\"�ɻ���\",\"id\":\"510108\"},\"geometry\":{\"type\":\"MultiPolygon\",\"coordinates\":[[[[104.153985625,30.740483625],[104.161353789063,30.7259181953125],[104.172735625,30.7314748359376],[104.190704375,30.717202375],[104.219771757813,30.708813703125],[104.227345,30.693843],[104.223260527344,30.6879274726563],[104.161903105469,30.6721804023438],[104.153260527344,30.6279274726563],[104.137345,30.623843],[104.09170046875,30.65819846875],[104.087345,30.663843],[104.087345,30.6738430000001],[104.083260527344,30.6997585273438],[104.070081816406,30.7088576484376],[104.137345,30.753843],[104.140704375,30.747202375],[104.153985625,30.740483625]]]]}}","Chenghua District",7.5,5.98],["{\"type\":\"Feature\",\"properties\":{\"name\":\"��Ȫ����\",\"id\":\"510112\"},\"geometry\":{\"type\":\"MultiPolygon\",\"coordinates\":[[[[104.437345,30.653843],[104.424647246094,30.6484084296876],[104.433292265625,30.630844953125],[104.447345,30.653843],[104.447345,30.613843],[104.427345,30.613843],[104.427345,30.603843],[104.411429472656,30.5997585273438],[104.400186796875,30.5834743476562],[104.403465605469,30.568843],[104.395250273438,30.5321950507813],[104.414586210938,30.5188430000001],[104.401429472656,30.5097585273438],[104.393260527344,30.4979274726563],[104.342557402344,30.4849147773438],[104.332615996094,30.51147971875],[104.321673613281,30.495630109375],[104.295545683594,30.5014870429688],[104.252349882813,30.483344953125],[104.247345,30.463843],[104.207398710938,30.4838747382813],[104.180657988281,30.5371071601562],[104.160704375,30.547202375],[104.157345,30.563843],[104.163216582031,30.5891823554688],[104.137345,30.623843],[104.153260527344,30.6279274726563],[104.161903105469,30.6721804023438],[104.223260527344,30.6879274726563],[104.227345,30.693843],[104.233531523438,30.6900295234376],[104.244737578125,30.6718459296876],[104.261158476563,30.7200295234375],[104.267345,30.723843],[104.272857695313,30.7167018867188],[104.308175078125,30.7219216132813],[104.380941191406,30.6921388984376],[104.392857695313,30.6767018867188],[104.419906035156,30.6806984687501],[104.437345,30.6738430000001],[104.437345,30.653843]]]]}}","Longquanyi District",6.42,5.67],["{\"type\":\"Feature\",\"properties\":{\"name\":\"������\",\"id\":\"510105\"},\"geometry\":{\"type\":\"MultiPolygon\",\"coordinates\":[[[[103.957345,30.723843],[103.976312285156,30.6963698554688],[104.004320097656,30.7026491523438],[104.001051054688,30.6880690742188],[104.023260527344,30.6797585273438],[104.042345,30.6673317695313],[104.061929960938,30.6800856757813],[104.087345,30.6738430000001],[104.087345,30.663843],[104.067345,30.663843],[104.067345,30.653843],[103.991790800781,30.6582888007813],[103.947345,30.663843],[103.927345,30.663843],[103.927345,30.6738430000001],[103.917345,30.6738430000001],[103.907345,30.6738430000001],[103.900531035156,30.6791042304688],[103.93170046875,30.71948753125],[103.947345,30.723843],[103.957345,30.723843]]]]}}","Qingyang District",5.7,6.81],["{\"type\":\"Feature\",\"properties\":{\"name\":\"������\",\"id\":\"510104\"},\"geometry\":{\"type\":\"MultiPolygon\",\"coordinates\":[[[[104.163216582031,30.5891823554688],[104.157345,30.563843],[104.131929960938,30.5700856757812],[104.111998320313,30.55710471875],[104.103260527344,30.5697585273438],[104.077345,30.573843],[104.083089628906,30.6088088203125],[104.081605253906,30.618843],[104.084486113281,30.6383303046875],[104.07170046875,30.6481984687501],[104.067345,30.653843],[104.067345,30.663843],[104.087345,30.663843],[104.09170046875,30.65819846875],[104.137345,30.623843],[104.163216582031,30.5891823554688]]]]}}","JinJiang District",5.34,6.2],["{\"type\":\"Feature\",\"properties\":{\"name\":\"�½���\",\"id\":\"510115\"},\"geometry\":{\"type\":\"MultiPolygon\",\"coordinates\":[[[[103.927345,30.663843],[103.917345,30.663843],[103.917345,30.6738430000001],[103.927345,30.6738430000001],[103.927345,30.663843]]],[[[103.801607695313,30.7860329414063],[103.86705203125,30.747563703125],[103.895206328125,30.7510646796876],[103.94099734375,30.7317702460938],[103.947345,30.723843],[103.93170046875,30.71948753125],[103.900531035156,30.6791042304688],[103.907345,30.6738430000001],[103.897486601563,30.6605886054688],[103.882345,30.6579811835938],[103.869505644531,30.6601930976563],[103.832081328125,30.6098805976563],[103.797345,30.623843],[103.785513945313,30.6320119453125],[103.760943632813,30.6675954414063],[103.763565703125,30.6792897773438],[103.751429472656,30.6979274726563],[103.743260527344,30.7197585273438],[103.731429472656,30.7379274726563],[103.727345,30.753843],[103.721790800781,30.7682888007813],[103.712899199219,30.8093971992188],[103.683756132813,30.8852126289063],[103.717345,30.8638430000001],[103.721790800781,30.8482888007813],[103.752899199219,30.8293971992187],[103.761790800781,30.8182888007813],[103.782899199219,30.8093971992188],[103.801607695313,30.7860329414063]]]]}}","Wenjiang District",4.23,3.84]],"fields":[{"name":"_geojson","type":"geojson","format":""},{"name":"NAME","type":"string","format":""},{"name":"Population Density","type":"real","format":""},{"name":"Working Density","type":"real","format":""}]}}];
            const config = {"version":"v1","config":{"visState":{"filters":[],"layers":[{"id":"xd6r9pe","type":"geojson","config":{"dataId":"4xsr4t2yf","label":"chengdusensity","color":[23,184,190],"columns":{"geojson":"_geojson"},"isVisible":true,"visConfig":{"opacity":0.2,"thickness":0.5,"strokeColor":[246,209,138],"colorRange":{"name":"Uber Viz Diverging 3","type":"diverging","category":"Uber","colors":["#00939C","#49A6AE","#65B3BA","#B2DCDF","#FEEEE8","#F8C0AA","#EC9370","#DA6436","#C22E00"],"reversed":false},"strokeColorRange":{"name":"Global Warming","type":"sequential","category":"Uber","colors":["#5A1846","#900C3F","#C70039","#E3611C","#F1920E","#FFC300"]},"radius":10,"sizeRange":[0,10],"radiusRange":[0,50],"heightRange":[0,500],"elevationScale":3,"stroked":true,"filled":true,"enable3d":true,"wireframe":false},"textLabel":[{"field":null,"color":[255,255,255],"size":18,"offset":[0,0],"anchor":"start","alignment":"center"}]},"visualChannels":{"colorField":{"name":"Population Density","type":"real"},"colorScale":"quantile","sizeField":null,"sizeScale":"linear","strokeColorField":null,"strokeColorScale":"quantile","heightField":null,"heightScale":"linear","radiusField":null,"radiusScale":"linear"}}],"interactionConfig":{"tooltip":{"fieldsToShow":{"4xsr4t2yf":["NAME","Population Density","Working Density"]},"enabled":true},"brush":{"size":0.5,"enabled":false}},"layerBlending":"normal","splitMaps":[]},"mapState":{"bearing":24,"dragRotate":true,"latitude":30.587492232650057,"longitude":103.97385208931462,"pitch":50,"zoom":9.305218048180565,"isSplit":false},"mapStyle":{"styleType":"dark","topLayerGroups":{},"visibleLayerGroups":{"label":true,"road":true,"border":false,"building":true,"water":true,"land":true,"3d building":false},"mapStyles":{}}}};
            
            const loadedData = keplerGl.KeplerGlSchema.load(
              datasets,
              config
            );
            
            store.dispatch(keplerGl.addDataToMap(loadedData));
          }(KeplerGl, store))
        </script>
      </body>
    </html>
  